# ======================================================
# THE 7 SPACE PRODUCTION ENVIRONMENT CONFIGURATION
# Enterprise-Grade Automation Platform for Art Gallery & Wellness Center
# ======================================================

# ==== ENVIRONMENT CONFIGURATION ====
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO
JSON_LOGS=true
TESTING=false

# ==== THE 7 SPACE BUSINESS ENTITY CONFIGURATION ====
PRIMARY_BUSINESS_ENTITY=the_7_space
BUSINESS_ENTITY_ISOLATION=true

# Business entity specific settings
THE_7_SPACE_ENABLED=true
AM_CONSULTING_ENABLED=false
HIGHERSELF_CORE_ENABLED=false

# The 7 Space specific configuration
THE_7_SPACE_CONTACT_COUNT=191
THE_7_SPACE_GALLERY_MODE=true
THE_7_SPACE_WELLNESS_MODE=true
THE_7_SPACE_WORDPRESS_INTEGRATION=true

# ==== SECRETS MANAGEMENT CONFIGURATION ====
# Production uses AWS Secrets Manager with Vault fallback
SECRETS_BACKEND=aws_secrets_manager
SECRETS_FALLBACK_BACKEND=vault

# AWS Secrets Manager configuration
AWS_REGION=us-east-1
AWS_SECRETS_MANAGER_PREFIX=the7space/production/

# Vault configuration (fallback)
VAULT_ADDR=http://the7space-vault:8200
VAULT_NAMESPACE=the7space-production
VAULT_MOUNT_PATH=secret

# Enable secrets rotation for production
ENABLE_SECRETS_ROTATION=true
SECRETS_ROTATION_SCHEDULE=0 2 * * 0  # Weekly on Sunday at 2 AM

# Encryption configuration
ENABLE_ENCRYPTION_AT_REST=true
SECRETS_ENCRYPTION_ALGORITHM=AES-256-GCM

# ==== SERVER CONFIGURATION ====
SERVER_HOST=0.0.0.0
SERVER_PORT=8000
HTTPS_PORT=8443
SERVER_RELOAD=false
SERVER_WORKERS=4
WEBHOOK_SECRET=CHANGE_IN_PRODUCTION_STRONG_SECRET
TEST_MODE=false
DISABLE_WEBHOOKS=false

# SSL Configuration
SSL_ENABLED=true
SSL_CERT_PATH=/etc/ssl/certs/the7space.crt
SSL_KEY_PATH=/etc/ssl/private/the7space.key

# CORS Configuration
CORS_ORIGINS=["https://the7space.com", "https://api.the7space.com"]
CORS_ALLOW_CREDENTIALS=true

# ==== DATABASE CONFIGURATION ====
# MongoDB Configuration
MONGODB_HOST=the7space-mongodb
MONGODB_PORT=27017
MONGODB_DATABASE=the7space_production
MONGODB_USERNAME=the7space_user
MONGODB_PASSWORD=CHANGE_IN_PRODUCTION_STRONG_PASSWORD
MONGODB_ROOT_PASSWORD=CHANGE_IN_PRODUCTION_ROOT_PASSWORD
MONGODB_AUTH_SOURCE=admin

# MongoDB Performance Settings
MONGODB_MAX_POOL_SIZE=50
MONGODB_MIN_POOL_SIZE=5
MONGODB_MAX_IDLE_TIME_MS=30000
MONGODB_CONNECT_TIMEOUT_MS=10000
MONGODB_SERVER_SELECTION_TIMEOUT_MS=5000

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_IN_PRODUCTION_REDIS_PASSWORD
REDIS_DATABASE=0
REDIS_MAX_CONNECTIONS=50
REDIS_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5
REDIS_SOCKET_TIMEOUT=5
REDIS_HEALTH_CHECK_INTERVAL=30

# Redis Performance Settings
REDIS_CACHE_ENABLED=true
REDIS_SESSION_STORE_ENABLED=true
REDIS_RATE_LIMITING_ENABLED=true
REDIS_METRICS_ENABLED=true
REDIS_SLOW_QUERY_THRESHOLD=1.0

# ==== EXTERNAL SERVICE INTEGRATIONS ====
# Notion Integration (The 7 Space Contacts - 191 contacts)
NOTION_API_TOKEN=CHANGE_IN_PRODUCTION_NOTION_TOKEN
THE_7_SPACE_CONTACTS_DB=CHANGE_TO_ACTUAL_DATABASE_ID
THE_7_SPACE_ARTWORKS_DB=CHANGE_TO_ACTUAL_DATABASE_ID
THE_7_SPACE_ARTISTS_DB=CHANGE_TO_ACTUAL_DATABASE_ID
THE_7_SPACE_EVENTS_DB=CHANGE_TO_ACTUAL_DATABASE_ID
THE_7_SPACE_SERVICES_DB=CHANGE_TO_ACTUAL_DATABASE_ID
THE_7_SPACE_APPOINTMENTS_DB=CHANGE_TO_ACTUAL_DATABASE_ID
THE_7_SPACE_CLASSES_DB=CHANGE_TO_ACTUAL_DATABASE_ID
THE_7_SPACE_SALES_DB=CHANGE_TO_ACTUAL_DATABASE_ID
THE_7_SPACE_MARKETING_DB=CHANGE_TO_ACTUAL_DATABASE_ID
THE_7_SPACE_ANALYTICS_DB=CHANGE_TO_ACTUAL_DATABASE_ID

# OpenAI Integration
OPENAI_API_KEY=CHANGE_IN_PRODUCTION_OPENAI_KEY
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.7

# WordPress SiteGround Integration
THE_7_SPACE_WORDPRESS_URL=https://the7space.com
THE_7_SPACE_WORDPRESS_API_KEY=the7space_automation_api_key_2024
THE_7_SPACE_WORDPRESS_USERNAME=utak@the7space.com
THE_7_SPACE_WORDPRESS_PASSWORD=hZKd OEjZ w07V K64h CtVw MFdC

# Email Configuration (for notifications)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=CHANGE_IN_PRODUCTION_EMAIL
SMTP_PASSWORD=CHANGE_IN_PRODUCTION_EMAIL_PASSWORD
SMTP_USE_TLS=true
FROM_EMAIL=noreply@the7space.com

# ==== MONITORING & OBSERVABILITY ====
# Prometheus Configuration
PROMETHEUS_PORT=9090
PROMETHEUS_SCRAPE_INTERVAL=15s
PROMETHEUS_EVALUATION_INTERVAL=15s
PROMETHEUS_RETENTION_TIME=30d

# Grafana Configuration
GRAFANA_PORT=3000
GRAFANA_ADMIN_PASSWORD=CHANGE_IN_PRODUCTION_GRAFANA_PASSWORD
GRAFANA_ALLOW_SIGN_UP=false

# Consul Configuration
CONSUL_PORT=8500
CONSUL_HTTP_ADDR=the7space-consul:8500
CONSUL_DATACENTER=the7space-production

# Logging Configuration
LOG_FILE=/app/logs/the7space-production.log
LOG_ROTATION_SIZE=100MB
LOG_RETENTION_DAYS=30
LOG_FORMAT=json

# ==== PERFORMANCE & RESOURCE CONFIGURATION ====
# Application Performance
MAX_REQUEST_SIZE=50MB
MAX_UPLOAD_SIZE=100MB
CONNECTION_TIMEOUT=60
REQUEST_TIMEOUT=120
WORKER_TIMEOUT=300

# Cache Configuration
CACHE_TTL=3600
CACHE_MAX_SIZE=1000
ENABLE_QUERY_CACHE=true
ENABLE_TEMPLATE_CACHE=true

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST=20

# ==== SECURITY CONFIGURATION ====
# Security Headers
SECURITY_HEADERS_ENABLED=true
HSTS_MAX_AGE=31536000
CONTENT_SECURITY_POLICY=default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'

# API Security
API_KEY_REQUIRED=true
JWT_SECRET_KEY=CHANGE_IN_PRODUCTION_JWT_SECRET
JWT_EXPIRATION_HOURS=24
JWT_REFRESH_EXPIRATION_DAYS=30

# ==== BACKUP & DISASTER RECOVERY ====
# Backup Configuration
BACKUP_ENABLED=true
BACKUP_INTERVAL=daily
BACKUP_RETENTION_DAYS=30
BACKUP_LOCATION=/backups/the7space
BACKUP_ENCRYPTION_ENABLED=true

# S3 Backup Configuration (optional)
AWS_S3_BACKUP_BUCKET=the7space-production-backups
AWS_S3_BACKUP_PREFIX=daily/
AWS_S3_BACKUP_ENCRYPTION=AES256

# ==== WORKFLOW AUTOMATION CONFIGURATION ====
# Contact Workflow Settings
CONTACT_WORKFLOW_ENABLED=true
CONTACT_PROCESSING_BATCH_SIZE=10
CONTACT_WORKFLOW_RETRY_ATTEMPTS=3
CONTACT_WORKFLOW_RETRY_DELAY=300

# Gallery Workflow Settings
GALLERY_WORKFLOW_ENABLED=true
ARTWORK_PROCESSING_ENABLED=true
ARTIST_ONBOARDING_ENABLED=true
EXHIBITION_SCHEDULING_ENABLED=true

# Wellness Workflow Settings
WELLNESS_WORKFLOW_ENABLED=true
APPOINTMENT_SCHEDULING_ENABLED=true
CLASS_MANAGEMENT_ENABLED=true
CLIENT_INTAKE_ENABLED=true

# Marketing Automation Settings
MARKETING_AUTOMATION_ENABLED=true
LEAD_SCORING_ENABLED=true
EMAIL_CAMPAIGNS_ENABLED=true
ANALYTICS_TRACKING_ENABLED=true

# ==== FEATURE FLAGS ====
# Core Features
ENABLE_API_DOCUMENTATION=true
ENABLE_HEALTH_CHECKS=true
ENABLE_METRICS_COLLECTION=true
ENABLE_DISTRIBUTED_TRACING=false

# Integration Features
ENABLE_NOTION_INTEGRATION=true
ENABLE_WORDPRESS_INTEGRATION=true
ENABLE_OPENAI_INTEGRATION=true
ENABLE_EMAIL_INTEGRATION=true

# Business Features
ENABLE_GALLERY_MANAGEMENT=true
ENABLE_WELLNESS_CENTER=true
ENABLE_CONTACT_MANAGEMENT=true
ENABLE_WORKFLOW_AUTOMATION=true

# ==== DEPLOYMENT CONFIGURATION ====
# Build Configuration
BUILD_VERSION=production-latest
IMAGE_TAG=the7space-production
CONTAINER_REGISTRY=ghcr.io/utak-west/the-higherself-network-server

# Resource Limits
APP_CPU_LIMIT=2.0
APP_MEMORY_LIMIT=4G
APP_CPU_RESERVATION=1.0
APP_MEMORY_RESERVATION=2G

MONGODB_CPU_LIMIT=1.5
MONGODB_MEMORY_LIMIT=3G
MONGODB_CPU_RESERVATION=0.5
MONGODB_MEMORY_RESERVATION=1G

REDIS_CPU_LIMIT=0.5
REDIS_MEMORY_LIMIT=1G
REDIS_CPU_RESERVATION=0.1
REDIS_MEMORY_RESERVATION=256M

# Network Configuration
NETWORK_SUBNET=172.20.0.0/16
NETWORK_GATEWAY=172.20.0.1

# Volume Paths
DATA_PATH=./data/the7space
LOGS_PATH=./logs/the7space
BACKUP_PATH=./backups/the7space
CONFIG_PATH=./config/the7space

# ==== HEALTH CHECK CONFIGURATION ====
# Application Health Checks
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=30s
HEALTH_CHECK_RETRIES=5
HEALTH_CHECK_START_PERIOD=120s

# Database Health Checks
DB_HEALTH_CHECK_INTERVAL=30s
DB_HEALTH_CHECK_TIMEOUT=10s
DB_HEALTH_CHECK_RETRIES=5

# External Service Health Checks
EXTERNAL_SERVICE_HEALTH_CHECK_INTERVAL=60s
EXTERNAL_SERVICE_HEALTH_CHECK_TIMEOUT=15s
EXTERNAL_SERVICE_HEALTH_CHECK_RETRIES=3

# ==== ALERTING CONFIGURATION ====
# Alert Thresholds
CPU_ALERT_THRESHOLD=80
MEMORY_ALERT_THRESHOLD=85
DISK_ALERT_THRESHOLD=90
RESPONSE_TIME_ALERT_THRESHOLD=1000

# Notification Channels
ALERT_EMAIL_ENABLED=true
ALERT_EMAIL_RECIPIENTS=admin@the7space.com,tech@the7space.com
ALERT_SLACK_ENABLED=false
ALERT_WEBHOOK_ENABLED=false

# ==== MAINTENANCE CONFIGURATION ====
# Maintenance Windows
MAINTENANCE_MODE_ENABLED=false
MAINTENANCE_START_TIME=02:00
MAINTENANCE_END_TIME=04:00
MAINTENANCE_TIMEZONE=UTC

# Cleanup Tasks
CLEANUP_ENABLED=true
CLEANUP_SCHEDULE=0 3 * * *  # Daily at 3 AM
LOG_CLEANUP_DAYS=30
TEMP_FILE_CLEANUP_HOURS=24
CACHE_CLEANUP_HOURS=6
