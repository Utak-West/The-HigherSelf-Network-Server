<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The HigherSelf Network Database Structure</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f7f7f7;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #6d28d9;
            margin-bottom: 10px;
        }
        .subtitle {
            color: #666;
            font-size: 1.2em;
        }
        .visualization-container {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 40px;
            overflow: hidden;
        }
        #visualization {
            width: 100%;
            height: 700px;
        }
        .legend {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            margin-right: 20px;
        }
        .legend-color {
            width: 20px;
            height: 20px;
            margin-right: 8px;
            border-radius: 4px;
        }
        .instructions {
            background-color: #f0f4ff;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 30px;
            border-left: 4px solid #6d28d9;
        }
        .database-details {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }
        .database-card {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            transition: transform 0.3s ease;
        }
        .database-card:hover {
            transform: translateY(-5px);
        }
        .database-card h3 {
            color: #6d28d9;
            margin-top: 0;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        .database-card p {
            color: #555;
        }
        .database-card.core {
            border-top: 4px solid #3b82f6;
        }
        .database-card.agent {
            border-top: 4px solid #10b981;
        }
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #666;
            font-size: 0.9em;
        }
        .sync-diagram {
            margin: 40px 0;
            text-align: center;
        }
        .sync-diagram img {
            max-width: 100%;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/vis-network@9.1.2/dist/vis-network.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>The HigherSelf Network Database Structure</h1>
            <p class="subtitle">Interactive visualization of the 16-database structure with Notion and Supabase synchronization</p>
        </header>

        <div class="instructions">
            <h2>How to Use This Visualization</h2>
            <p>This interactive diagram shows all 16 databases in The HigherSelf Network system and how they relate to each other. You can:</p>
            <ul>
                <li><strong>Drag nodes</strong> to rearrange the visualization</li>
                <li><strong>Zoom in/out</strong> using the mouse wheel</li>
                <li><strong>Click on a database</strong> to highlight its connections</li>
                <li><strong>Hover over connections</strong> to see relationship details</li>
            </ul>
        </div>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="background-color: #3b82f6;"></div>
                <span>Core Operational Databases</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #10b981;"></div>
                <span>Agent & System Support Databases</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #000;"></div>
                <span>Primary Relationship</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #9ca3af;"></div>
                <span>Secondary Relationship</span>
            </div>
        </div>

        <div class="visualization-container">
            <div id="visualization"></div>
        </div>

        <div class="sync-diagram">
            <h2>Notion-Supabase Synchronization</h2>
            <p>All 16 databases are synchronized between Notion and Supabase, providing the best of both worlds.</p>
            <img src="database_system_overview.svg" alt="Database Synchronization Diagram" width="800">
        </div>

        <h2>Database Details</h2>
        <div class="database-details">
            <!-- Core Operational Databases -->
            <div class="database-card core">
                <h3>Business Entities Registry</h3>
                <p>Central registry of all business entities in The HigherSelf Network, including The Connection Practice and The 7 Space.</p>
                <p><strong>Key fields:</strong> Name, Entity Type, API Keys Reference, Primary Workflows, Active Agents</p>
            </div>

            <div class="database-card core">
                <h3>Contacts & Profiles</h3>
                <p>Comprehensive database of all contacts, clients, and leads across all business entities.</p>
                <p><strong>Key fields:</strong> Name, Email, Phone, Contact Type, Business Entity, Tags, Lead Source</p>
            </div>

            <div class="database-card core">
                <h3>Community Hub</h3>
                <p>Tracks community members and their engagement across various platforms.</p>
                <p><strong>Key fields:</strong> Contact ID, Username, Membership Level, Join Date, Engagement Score</p>
            </div>

            <div class="database-card core">
                <h3>Products & Services</h3>
                <p>Catalog of all products and services offered by the business entities.</p>
                <p><strong>Key fields:</strong> Name, Type, Description, Price, Status, Inventory Count</p>
            </div>

            <div class="database-card core">
                <h3>Workflow Instances</h3>
                <p>Active workflow instances being processed by the system.</p>
                <p><strong>Key fields:</strong> Instance ID, Workflow ID, Status, Start Date, Business Entity, Current Step</p>
            </div>

            <div class="database-card core">
                <h3>Marketing Campaigns</h3>
                <p>Marketing initiatives and their performance metrics.</p>
                <p><strong>Key fields:</strong> Name, Description, Status, Start/End Dates, Target Audience, Channels</p>
            </div>

            <div class="database-card core">
                <h3>Feedback & Surveys</h3>
                <p>Customer feedback and survey responses.</p>
                <p><strong>Key fields:</strong> Title, Description, Status, Business Entity, Response Count, Average Rating</p>
            </div>

            <div class="database-card core">
                <h3>Rewards & Bounties</h3>
                <p>Reward programs and incentives for community members and clients.</p>
                <p><strong>Key fields:</strong> Name, Description, Reward Type, Status, Points Value, Monetary Value</p>
            </div>

            <div class="database-card core">
                <h3>Master Tasks</h3>
                <p>Centralized task management across all business processes.</p>
                <p><strong>Key fields:</strong> Task Name, Status, Description, Priority, Due Date, Assigned To</p>
            </div>

            <!-- Agent & System Support Databases -->
            <div class="database-card agent">
                <h3>Agent Communication Patterns</h3>
                <p>Defines how agents communicate with each other in the system.</p>
                <p><strong>Key fields:</strong> Pattern Name, Description, Source Agent, Target Agent, Message Format</p>
            </div>

            <div class="database-card agent">
                <h3>Agent Registry</h3>
                <p>Registry of all agents in the system with their capabilities and status.</p>
                <p><strong>Key fields:</strong> Agent ID, Name, Description, Status, Capabilities, APIs Utilized</p>
            </div>

            <div class="database-card agent">
                <h3>API Integrations Catalog</h3>
                <p>Catalog of all external API integrations used by the system.</p>
                <p><strong>Key fields:</strong> Name, Description, API Platform, Status, API Version, Auth Method</p>
            </div>

            <div class="database-card agent">
                <h3>Data Transformations Registry</h3>
                <p>Registry of data transformation rules for converting data between systems.</p>
                <p><strong>Key fields:</strong> Name, Description, Source Format, Target Format, Transformation Logic</p>
            </div>

            <div class="database-card agent">
                <h3>Notifications Templates</h3>
                <p>Templates for automated notifications sent by the system.</p>
                <p><strong>Key fields:</strong> Description, Channel, Content Template, Subject Template, Placeholders</p>
            </div>

            <div class="database-card agent">
                <h3>Use Cases Library</h3>
                <p>Library of business use cases supported by the system.</p>
                <p><strong>Key fields:</strong> Title, Description, Business Value, Implementation Status, Related Workflows</p>
            </div>

            <div class="database-card agent">
                <h3>Workflows Library</h3>
                <p>Library of workflow definitions that can be instantiated by the system.</p>
                <p><strong>Key fields:</strong> Name, Description, Status, Business Entities, Trigger Type, Workflow Steps</p>
            </div>
        </div>

        <footer>
            <p>© 2025 The HigherSelf Network. All rights reserved.</p>
            <p>For technical support, contact <a href="mailto:support@thehigherself.network">support@thehigherself.network</a></p>
        </footer>
    </div>

    <script>
        // Create nodes for each database
        const nodes = [
            // Core Operational Databases (blue)
            { id: 1, label: "Business Entities\nRegistry", group: "core" },
            { id: 2, label: "Contacts &\nProfiles", group: "core" },
            { id: 3, label: "Community Hub", group: "core" },
            { id: 4, label: "Products &\nServices", group: "core" },
            { id: 5, label: "Workflow\nInstances", group: "core" },
            { id: 6, label: "Marketing\nCampaigns", group: "core" },
            { id: 7, label: "Feedback &\nSurveys", group: "core" },
            { id: 8, label: "Rewards &\nBounties", group: "core" },
            { id: 9, label: "Master Tasks", group: "core" },

            // Agent & System Support Databases (green)
            { id: 10, label: "Agent Communication\nPatterns", group: "agent" },
            { id: 11, label: "Agent Registry", group: "agent" },
            { id: 12, label: "API Integrations\nCatalog", group: "agent" },
            { id: 13, label: "Data Transformations\nRegistry", group: "agent" },
            { id: 14, label: "Notifications\nTemplates", group: "agent" },
            { id: 15, label: "Use Cases\nLibrary", group: "agent" },
            { id: 16, label: "Workflows\nLibrary", group: "agent" }
        ];

        // Create edges between databases
        const edges = [
            // Primary relationships (black)
            { from: 1, to: 2, title: "Business Entity → Contacts" },
            { from: 1, to: 4, title: "Business Entity → Products" },
            { from: 1, to: 5, title: "Business Entity → Workflows" },
            { from: 1, to: 11, title: "Business Entity → Agents" },
            { from: 2, to: 3, title: "Contacts → Community Members" },
            { from: 2, to: 5, title: "Contacts → Workflow Instances" },
            { from: 2, to: 6, title: "Contacts → Marketing Campaigns" },
            { from: 4, to: 5, title: "Products → Workflow Instances" },
            { from: 5, to: 9, title: "Workflow Instances → Tasks" },
            { from: 5, to: 16, title: "Workflow Instances → Workflow Definitions" },
            { from: 11, to: 10, title: "Agents → Communication Patterns" },
            { from: 11, to: 12, title: "Agents → API Integrations" },
            { from: 16, to: 5, title: "Workflow Definitions → Instances" },

            // Secondary relationships (gray)
            { from: 3, to: 8, title: "Community → Rewards", color: { color: "#9ca3af" } },
            { from: 6, to: 7, title: "Marketing → Feedback", color: { color: "#9ca3af" } },
            { from: 7, to: 2, title: "Feedback → Contacts", color: { color: "#9ca3af" } },
            { from: 9, to: 1, title: "Tasks → Business Entity", color: { color: "#9ca3af" } },
            { from: 12, to: 13, title: "API → Transformations", color: { color: "#9ca3af" } },
            { from: 14, to: 5, title: "Notifications → Workflows", color: { color: "#9ca3af" } },
            { from: 15, to: 16, title: "Use Cases → Workflows", color: { color: "#9ca3af" } },
            { from: 13, to: 5, title: "Transformations → Workflows", color: { color: "#9ca3af" } }
        ];

        // Create a network
        const container = document.getElementById("visualization");
        const data = {
            nodes: new vis.DataSet(nodes.map(node => ({
                ...node,
                color: node.group === "core" ? "#3b82f6" : "#10b981",
                font: { color: "white" },
                shape: "box",
                margin: 10,
                shadow: true
            }))),
            edges: new vis.DataSet(edges.map(edge => ({
                ...edge,
                width: edge.color ? 1 : 2,
                arrows: "to"
            })))
        };

        const options = {
            layout: {
                improvedLayout: true,
                hierarchical: {
                    enabled: false
                }
            },
            physics: {
                enabled: true,
                barnesHut: {
                    gravitationalConstant: -2000,
                    centralGravity: 0.3,
                    springLength: 150,
                    springConstant: 0.04
                },
                stabilization: {
                    iterations: 1000
                }
            },
            interaction: {
                hover: true,
                tooltipDelay: 200,
                zoomView: true,
                dragView: true
            }
        };

        const network = new vis.Network(container, data, options);

        // Add event listeners
        network.on("click", function(params) {
            if (params.nodes.length > 0) {
                const nodeId = params.nodes[0];
                const connectedEdges = network.getConnectedEdges(nodeId);

                // Highlight the selected node and its connections
                data.nodes.update(nodes.map(node => ({
                    id: node.id,
                    opacity: node.id === nodeId ? 1 : 0.3
                })));

                data.edges.update(edges.map(edge => ({
                    id: edge.id,
                    opacity: connectedEdges.includes(edge.id) ? 1 : 0.3,
                    width: connectedEdges.includes(edge.id) ? (edge.color ? 2 : 3) : (edge.color ? 1 : 2)
                })));
            } else {
                // Reset all nodes and edges
                data.nodes.update(nodes.map(node => ({
                    id: node.id,
                    opacity: 1
                })));

                data.edges.update(edges.map(edge => ({
                    id: edge.id,
                    opacity: 1,
                    width: edge.color ? 1 : 2
                })));
            }
        });
    </script>
</body>
</html>
